<!-- DOCTYPE flight_plan SYSTEM "flight_plan.dtd" -->

<flight_plan NAME="IC experiment" lat0="51.990634" lon0="4.376771" MAX_DIST_FROM_HOME="150" GROUND_ALT="0" SECURITY_HEIGHT="1" ALT="2">
  <header>
#include "firmwares/rotorcraft/guidance/guidance_v.h"
#include "subsystems/radio_control.h"
#include "modules/AutoHeading/autoheading.h"
  </header>
  <waypoints>
    <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
  </waypoints>

  <exceptions>
    <exception cond="0>kill_switch_status_flight_plan" deroute="wait5sec"/>
  </exceptions>
  <blocks>
    <block name="wait">
      <call fun="NavKillThrottle()"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle" until="stage_time>30"/>
    </block>
    <block name="wait5sec">
      <call fun="NavKillThrottle()"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle" until="stage_time>5"/>
    </block>
    <block name="gooooo">
      <call fun="NavResurrect()"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle" until="stage_time>2"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle" until="stage_time>30"/>
    </block>
    <block name="land">
      <set var="guidance_v_z_sp" value="guidance_v_z_sp+256"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle" until="stage_time>2"/>
      <set var="guidance_v_z_sp" value="guidance_v_z_sp+256"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle" until="stage_time>1"/>
      <set var="guidance_v_z_sp" value="guidance_v_z_sp+256"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle" until="stage_time>1"/>
    </block>
    <block name="landed">
      <call fun="NavKillThrottle()"/>
      <attitude pitch="0" roll="0" throttle="0" vmode="throttle"/>
    </block>
  </blocks>
</flight_plan>

